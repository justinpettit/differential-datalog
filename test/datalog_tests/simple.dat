echo Metro test;

start;

insert Links(4, "St.Germain", "Odeon"),
insert Links(4, "Odeon", "St.Michel"),
insert Links(4, "St.Michel", "Chatelet"),
insert Links(1, "Chatelet", "Louvres"),
insert Links(1, "Louvres", "Palais Royal"),
insert Links(1, "Palais-Royal", "Tuileries"),
insert Links(1, "Tuileries", "Concorde");

commit;

dump;

echo Rules test;
start;
insert R3(0, true),
insert R3(1, true),
insert R3(2, true),
insert R3(3, true),
insert R3(4, true),
insert R3(5, true),
insert R3(6, true);
commit;
dump;

start;
insert Table1(0, "foo"),
insert Table1(1, "foo"),
insert Table1(0xabcdef000, "foo"),
insert Table1(125, "buzzzzzzzz");
insert Table2("foo", 1234567890, S{(true,true),5}),
insert Table2("foo", 12, S{(true,false),0xabcd}),
insert Table2("foo", 100000000000000, S{(false,true),10000}),
insert Table2("buzzzzzzzz", 1234567890, S{(true,true),5});
commit;
dump Table12;

start;

insert Rel1(0, IP4{100}),
insert Rel1(1, IP6{200}),
insert Rel2(0, Option1{0, IP4{300}, (true, "foo")});

commit;

echo Rel1:;
dump Rel1;

echo Rel2:;
dump Rel2;

echo Rel3:;
dump Rel3;

start;

insert AggregateMe1("a", "1"),
insert AggregateMe1("a", "2"),
insert AggregateMe1("a", "3"),
insert AggregateMe1("b", "1"),
insert AggregateMe1("b", "2"),
insert AggregateMe1("b", "3");

commit;

echo Aggregate1;
dump Aggregate1;

echo Aggregate2;
dump Aggregate2;

echo Aggregate3;
dump Aggregate3;

echo Aggregate4;
dump Aggregate4;

echo Disaggregate;
dump Disaggregate;

start;

insert WithKey(0, "foo"),
insert WithKey(1, "bar"),
insert WithKey(2, "buzz");

commit;

echo WithKey;
dump WithKey;

start;

delete WithKey(0, "foo");

commit;

echo WithKey after deletion by value;
dump WithKey;

start;

delete_key WithKey 1;

commit;

echo WithKey after deletion by key;
dump WithKey;


start;

insert WithKey(1, "bar2"),
insert WithKey(3, "xxx"),
insert WithKey(4, "hello"),
delete_key WithKey 2,
delete_key WithKey 3;

commit;

echo WithKey: +3, -2;
dump WithKey;

start;

insert Gangster("Billy Jack", "Vito Giacalone"),
insert Gangster("Black Leo", "Leonardo Cellura"),
insert Gangster("Black Sam", "Sam Todaro"),
insert Gangster("Blackie", "James T. Licavoli"),
insert Gangster("Bobby Doyle", "Girolamo Santucci"),
insert Gangster("Bobby Ha Ha", "Robert Attanasio"),
insert Gangster("Bobby Phones", "Robert Sanseverino"),
insert Gangster("Bomp", "Frank Bompensiero"),
insert Gangster("Boo Boo", "Max Hoff"),
insert Gangster("Boobie", "John Cerasini"),
insert Gangster("Bozey", "Arnold Squitieri"),
insert Gangster("The Brain", "Arnold Rothstein"),
insert Gangster("The Bug", "Charles Workman"),
insert Gangster("Bugs", "George Moran"),
insert Gangster("Bugsy", "Benjamin Siegel"),
insert Gangster("The Builder", "Joe Andriacchi"),
insert Gangster("Butsey", "Frank Morelli"),

insert Suspect("John Doe"),
insert Suspect("Bill Smith"),
insert Suspect("Arnold Squitieri"),
insert Suspect("Frank Morelli");

commit;

echo Innocent;
dump Innocent;

start;

insert Address(IPAddr{10,10,10,101}),
insert Address(IPAddr{10,10,10,102}),
insert Address(IPAddr{10,10,10,103}),
insert Address(IPAddr{10,10,10,104}),
insert Address(IPAddr{10,10,10,105}),
insert Address(IPAddr{192,168,0,1}),
insert Address(IPAddr{192,168,0,2}),
insert Address(IPAddr{192,168,0,3}),
insert Address(IPAddr{192,168,0,4}),
insert Address(IPAddr{192,168,0,5}),

insert Blacklist(IPAddr{192,168,0,0}),
insert Blacklist(IPAddr{172,16,0,0});

commit;

echo ValidDestination;
dump ValidDestination;
